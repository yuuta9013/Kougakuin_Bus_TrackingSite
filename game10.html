<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>横スクロールアクションゲーム</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            overflow: hidden; /* 横スクロールゲームでスクロールを制限 */
        }
        .game {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }
        #gameArea {
            width: 800px;
            height: 400px;
            background-color: skyblue;
            overflow: hidden;
            border: 2px solid black;
            position: relative;
        }
        .character {
            width: 40px;
            height: 40px;
            background-color: red;
            position: absolute;
            bottom: 10px; /* 地面に置く */
            left: 50px;
        }
        .ground {
            position: absolute;
            bottom: 0;
            width: 2000px; /* スクロール用に長い地面 */
            height: 20px;
            background-color: green;
        }
        .obstacle {
            position: absolute;
            width: 20px;
            height: 40px;
            background-color: brown;
            bottom: 20px;
        }
    </style>
</head>
<body>
    <section class="game">
        <h1>横スクロールアクションゲーム</h1>
        <div id="gameArea">
            <div id="character" class="character"></div>
            <div class="ground"></div>
            <div class="obstacle" style="left: 300px;"></div>
            <div class="obstacle" style="left: 600px;"></div>
            <div class="obstacle" style="left: 900px;"></div>
        </div>
        <p id="status">スペースキーでジャンプ！</p>
    </section>

    <script>
        const character = document.getElementById("character");
        const gameArea = document.getElementById("gameArea");
        const groundHeight = 20;
        let velocityY = 0;
        let gravity = 0.8;
        let isJumping = false;
        let scrollOffset = 0;

        function gameLoop() {
            // 重力処理
            if (character.offsetTop < gameArea.clientHeight - groundHeight - character.clientHeight) {
                velocityY += gravity;
                character.style.top = character.offsetTop + velocityY + "px";
            } else {
                velocityY = 0;
                character.style.top = gameArea.clientHeight - groundHeight - character.clientHeight + "px";
                isJumping = false;
            }

            // スクロール効果
            scrollOffset += 2; // スクロールスピード
            gameArea.style.backgroundPositionX = -scrollOffset + "px";

            // キャラクター移動（デモ用に常に右に移動）
            let characterLeft = character.offsetLeft + 2;
            character.style.left = characterLeft + "px";

            // ゲームループの継続
            requestAnimationFrame(gameLoop);
        }

        function jump() {
            if (!isJumping) {
                velocityY = -12; // ジャンプの初速度
                isJumping = true;
            }
        }

        window.addEventListener("keydown", (event) => {
            if (event.code === "Space") {
                jump();
            }
        });

        gameLoop(); // ゲームを開始
    </script>
</body>
</html>
